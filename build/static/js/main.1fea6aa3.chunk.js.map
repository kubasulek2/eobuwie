{"version":3,"sources":["components/atoms/button/Button.module.scss","components/atoms/label/Label.module.scss","components/pages/app/App.module.scss","components/atoms/divider/Divider.module.scss","components/atoms/input/Input.module.scss","components/molecules/reservation_header/ReservationHeader.module.scss","components/molecules/date_picker_modal/DatePickerModal.module.scss","components/organisms/date_picker/DatePicker.module.scss","components/atoms/star/Star.module.scss","components/atoms/month_day/MonthDay.module.scss","utils/joinClassNames.ts","components/atoms/button/Button.tsx","components/atoms/divider/Divider.tsx","components/atoms/input/Input.tsx","components/atoms/label/Label.tsx","utils/scoreToStarValue.ts","components/atoms/star/Star.tsx","components/molecules/star_rating/StarRating.tsx","components/molecules/reservation_header/ReservationHeader.tsx","components/atoms/month_day/MonthDay.tsx","components/molecules/date_picker_modal/DatePickerModal.tsx","utils/computeCalendarDays.ts","utils/getCalendarMonthBoundries.ts","utils/crossBrowserElClosest.ts","utils/findFocusableElements.ts","hooks/useDatePicker.ts","hooks/usePrevious.ts","hooks/usePickerKeyboardControl.ts","components/organisms/date_picker/DatePicker.tsx","components/organisms/reservation_card/ReservationCard.tsx","components/pages/app/App.tsx","index.tsx","components/organisms/reservation_card/ReservationCard.module.scss","components/molecules/star_rating/StarRating.module.scss"],"names":["module","exports","joinClassNames","names","join","trim","Button","children","id","onClick","type","size","classes","disabled","htmlProps","className","styles","button","aria-disabled","undefined","Divider","data-testid","divider","Input","value","onChange","placeholder","input","e","target","Label","idFor","title","required","htmlFor","label","scoreToStarValue","score","index","TypeError","result","Star","rating","iconName","sizeClass","small","medium","large","classlist","icon","role","aria-hidden","xmlns","viewBox","one","points","two","StarRating","votes","container","wrapper","aria-label","map","num","ReservationHeader","price","MonthDay","dateString","timeStamp","monthDay","column","available","firstSelected","lastSelected","selected","onlySelected","today","Error","availableClass","todayClass","selectedClass","firstClass","first","lastClass","last","onlyClass","only","onMouseDown","preventDefault","data-column","tabIndex","data-date","day","DAYS_OF_WEEK","DatePickerModal","open","monthDays","pickerDate","setPickerDate","onDateClick","startDate","endDate","calendarRows","Array","from","length","_","i","startTimestamp","getTime","endTimestamp","isDaySelected","isOnlySelected","modal","hidden","aria-modal","modal_header","month_arrow_btn","addMonths","month_arrow","month_arrow_left","month","format","getFullYear","month_arrow_right","calendar_container","week_names","week_day","calendar_row","filter","computeCalendarDays","unavailableDates","Date","selectedDate","isBefore","daysDiff","differenceInCalendarDays","sort","a","b","unavailableFrom","find","d","days","currentDay","addDays","some","isSameDay","push","weekDay","getDay","isToday","getDate","getCalendarMonthBoundries","date","firstDay","startOfMonth","lastDay","endOfMonth","firstDayOfWeek","startOfWeek","daysToFirst","differenceInDays","monthLength","getDaysInMonth","daysToAdd","crossBrowserElClosest","el","selector","Element","prototype","matches","msMatchesSelector","webkitMatchesSelector","closest","Boolean","parentElement","parentNode","nodeType","findFocusableElements","querySelectorAll","hasAttribute","getAttribute","useDatePicker","setStartDate","setEndDate","useState","pickerOpen","setPickerOpen","startOfDay","setMonthDays","prevStartDate","ref","useRef","useEffect","current","usePrevious","pickerId","modalId","useMemo","lastActiveElement","setLastActiveElement","mouseHandler","keyboardHandler","key","picker","document","getElementById","elements","hasColumns","querySelector","focusIndex","findIndex","activeElement","shiftKey","focus","click","keyDown","colNum","dataset","colElements","colIndex","addEventListener","removeEventListener","firstFocusableEl","usePickerKeyboardControl","start","end","calDays","DatePicker","startDateString","endDateString","startDateClasses","date_selected","endDateClasses","useCallback","sameDay","prev","modal_open","aria-controls","aria-haspopup","aria-describedby","arrow","ReservationCard","onSubmit","formError","setFormError","handleStartDate","handleEndDate","card","formControl","name","aria-atomic","errMsg","error","App","app","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.1fea6aa3.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3KBWX\",\"small\":\"Button_small__1MxXK\",\"medium\":\"Button_medium__3efDZ\",\"large\":\"Button_large__3XhXW\",\"disabled\":\"Button_disabled__3HM7Y\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"Label_label__3V9v3\",\"small\":\"Label_small__337-V\",\"medium\":\"Label_medium__2YMHw\",\"large\":\"Label_large__38LaH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__3KXsq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"divider\":\"Divider_divider__4IKf8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"Input_input__WiRNm\",\"hiddenInput\":\"Input_hiddenInput__1RPH_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"price\":\"ReservationHeader_price__2JxYH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"DatePickerModal_modal__1ZZUh\",\"modal_header\":\"DatePickerModal_modal_header__1F2gA\",\"month\":\"DatePickerModal_month__1t3Td\",\"month_arrow\":\"DatePickerModal_month_arrow__1wXA-\",\"month_arrow_left\":\"DatePickerModal_month_arrow_left__3Pbth\",\"month_arrow_right\":\"DatePickerModal_month_arrow_right__34jGE\",\"month_arrow_btn\":\"DatePickerModal_month_arrow_btn__2mvou\",\"calendar_container\":\"DatePickerModal_calendar_container__3AlkM\",\"week_names\":\"DatePickerModal_week_names__wW3yH\",\"week_day\":\"DatePickerModal_week_day__3rukS\",\"calendar_row\":\"DatePickerModal_calendar_row__1C0J9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"DatePicker_wrapper__3pAZ4\",\"picker\":\"DatePicker_picker__14_KY\",\"picker_placeholder\":\"DatePicker_picker_placeholder__3dsWo\",\"modal_open\":\"DatePicker_modal_open__1ML_n\",\"date\":\"DatePicker_date__2BaG_\",\"date_selected\":\"DatePicker_date_selected__2fQdT\",\"arrow\":\"DatePicker_arrow__2SdQ1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"small\":\"Star_small__7XXwT\",\"medium\":\"Star_medium__3PXpV\",\"large\":\"Star_large__1EQa7\",\"icon\":\"Star_icon__13Z6K\",\"one\":\"Star_one__I40_0\",\"two\":\"Star_two__1mczC\",\"star_half\":\"Star_star_half__1HJ_-\",\"star_empty\":\"Star_star_empty__O4JPo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MonthDay_container__g1KKZ\",\"wrapper\":\"MonthDay_wrapper__3Miex\",\"day\":\"MonthDay_day__2t_td\",\"available\":\"MonthDay_available__haWyX\",\"today\":\"MonthDay_today__US1Xj\",\"selected\":\"MonthDay_selected__3tXk-\",\"only\":\"MonthDay_only__zFrVI\",\"first\":\"MonthDay_first__3877O\",\"last\":\"MonthDay_last__2GF_o\"};","/**\r\n * pass list of class names as arguments and get concatenated string\r\n */\r\nexport const joinClassNames = (...names: string[]): string => names.join(' ').trim();","import {FC} from 'react';\r\nimport {joinClassNames} from \"../../../utils/joinClassNames\";\r\nimport {ButtonProps} from \"./types\";\r\nimport styles from \"./Button.module.scss\";\r\n\r\n/**\r\n * Button component. Warm red color by default. Can be overritten via \"classes\" prop.\r\n */\r\nconst Button: FC<ButtonProps> = ({children, id, onClick, type = \"button\", size = \"medium\", classes = [], disabled, ...htmlProps}) => {\r\n  return (\r\n    <button\r\n      {...htmlProps}\r\n      /* Do not add disabled atribute due to accessibility reasons, make it class instead */\r\n      className={joinClassNames(styles.button, styles[size], (disabled ? styles.disabled : \"\"),  ...classes)}\r\n      /* Make sure if disabled is on, aria-disabled is set */\r\n      aria-disabled={disabled ? \"true\" : \"false\"}\r\n      id={id}\r\n      type={type}\r\n      onClick={!disabled ? onClick : undefined}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","import {VFC} from 'react';\r\nimport {joinClassNames} from \"../../../utils/joinClassNames\";\r\nimport {DividerProps} from \"./types\";\r\nimport styles from \"./Divider.module.scss\";\r\n\r\n\r\n/**\r\n * Horizontal diver line.\r\n */\r\nconst Divider: VFC<DividerProps> = ({classes = []}) =>  <hr data-testid=\"divider\" className={joinClassNames(styles.divider, ...classes)} />;\r\n\r\nexport default Divider;\r\n","import {VFC} from 'react';\r\nimport styles from \"./Input.module.scss\";\r\nimport {InputProps} from \"./types\";\r\nimport {joinClassNames} from \"../../../utils/joinClassNames\";\r\n\r\n/**\r\n * Text or date input. Controlled or uncontrolled. Pass \"value\" and \"onChange\" props to make it controlled \r\n */\r\nconst Input: VFC<InputProps> = ({value, onChange, id, placeholder, type=\"text\", classes=[], ...htmlProps}) => {\r\n  return (\r\n    <input\r\n      {...htmlProps}\r\n      className={joinClassNames(styles.input, ...classes)}\r\n      value={value}\r\n      onChange={e => onChange ? onChange(e.target.value) : undefined}\r\n      placeholder={placeholder}\r\n      type={type}\r\n      id={id}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Input;\r\n","import {VFC} from 'react';\r\nimport {LabelProps} from \"./types\";\r\nimport styles from './Label.module.scss';\r\nimport {joinClassNames} from \"../../../utils/joinClassNames\";\r\n\r\n/**\r\n *  Input label, should be given an input id via props.\r\n */\r\nconst Label: VFC<LabelProps> = ({idFor, title, classes = [], required = false, size = \"small\"}) => {\r\n  return (\r\n    <label\r\n      data-testid=\"label\"\r\n      htmlFor={idFor}\r\n      className={joinClassNames(styles.label, styles[size], ...classes)}\r\n    >\r\n      {title} {required ? \" *\" : \"\"}\r\n    </label>\r\n  );\r\n};\r\n\r\nexport default Label;\r\n","/**\r\n * Translates score in points, to value of star at specific index\r\n * @param index - starts at 1, so first star has index 1 not 0\r\n * @return 1 - for full star, 0.5 for half star, 0 for empty star\r\n */\r\nexport function scoreToStarValue(score: number, index: number): 1 | 0.5 | 0 {\r\n  if(score < 0) throw new TypeError('Score must be non negative.');\r\n  if(index < 1) throw new TypeError('1 is minimal index value');\r\n  const result = index - score;\r\n  return result <= 0 ? 1 : result <= 0.5 ? 0.5 : 0;\r\n}","import {VFC} from 'react';\r\nimport {joinClassNames} from '../../../utils/joinClassNames';\r\nimport {StarProps} from './types';\r\nimport styles from './Star.module.scss';\r\n\r\n/**\r\n * Rating star component, read only, displays empty, full or half full star icon\r\n */\r\nconst Star: VFC<StarProps> = ({classes = [], rating = 1, size = 'medium'}) => {\r\n\tconst iconName =\r\n\t\trating === 1\r\n\t\t\t? styles['star']\r\n\t\t\t: rating === 0.5\r\n\t\t\t? styles['star_half']\r\n\t\t\t: styles['star_empty'];\r\n\r\n\tconst sizeClass =\r\n\t\tsize === 'small'\r\n\t\t\t? styles.small\r\n\t\t\t: size === 'medium'\r\n\t\t\t? styles.medium\r\n\t\t\t: styles.large;\r\n\r\n\tconst classlist = joinClassNames(styles.icon, iconName, ...classes); // custom classes will override defaults\r\n\t\r\n\treturn (\r\n\t\t<div\r\n\t\t\tdata-testid=\"star\"\r\n\t\t\trole=\"presentation\"\r\n\t\t\taria-hidden=\"true\"\r\n\t\t\tclassName={sizeClass}\r\n\t\t>\r\n\t\t\t<svg\r\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\t\tviewBox=\"0 0 279.62 265.93\"\r\n\t\t\t\tclassName={classlist}\r\n\t\t\t>\r\n\t\t\t\t<polygon\r\n\t\t\t\t\tclassName={styles.one}\r\n\t\t\t\t\tpoints=\"0 101.58 106.8 101.58 139.81 0 139.81 203.15 53.4 265.93 86.41 164.35 0 101.58\"\r\n\t\t\t\t/>\r\n\t\t\t\t<polygon\r\n\t\t\t\t\tclassName={styles.two}\r\n\t\t\t\t\tpoints=\"279.62 101.58 172.81 101.58 139.81 0 139.81 203.15 226.22 265.93 193.21 164.35 279.62 101.58\"\r\n\t\t\t\t/>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Star;\r\n","import {VFC} from 'react';\r\nimport {scoreToStarValue} from \"../../../utils/scoreToStarValue\";\r\nimport Star from \"../../atoms/star/Star\";\r\nimport {StarRatingProps} from \"./types\";\r\nimport styles from \"./StarRating.module.scss\";\r\nimport {joinClassNames} from \"../../../utils/joinClassNames\";\r\n\r\n/**\r\n * Component displays 5 star rating.\r\n */\r\nconst StarRating: VFC<StarRatingProps> = ({score, votes, id, size = \"medium\"}) => {\r\n  return (\r\n    <div\r\n      data-testid=\"star_rating\"\r\n      className={joinClassNames(styles.container, styles[\"container_\" + size])}\r\n      id={id}\r\n    >\r\n      <div\r\n        className={styles.wrapper}\r\n        aria-label={`Rating: ${ score }. Based on ${ votes } votes.`}\r\n      >\r\n        {[1, 2, 3, 4, 5].map(num => <Star rating={scoreToStarValue(score, num)} size={size} key={num} />)}\r\n      </div>\r\n      <span className={joinClassNames(styles.votes, styles[\"votes_\" + size])}>{votes}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default StarRating;\r\n","import {VFC} from 'react';\r\nimport {ReservationHeaderProps} from \"./types\";\r\nimport styles from \"./ReservationHeader.module.scss\";\r\nimport StarRating from \"../star_rating/StarRating\";\r\n\r\n/**\r\n * Reservation card header, containing price, rating and number of votes.\r\n */\r\nconst ReservationHeader: VFC<ReservationHeaderProps> = ({price,score,votes,id}) => {\r\n  return (\r\n    <div data-testid=\"card_header\" id={id}>\r\n      <h3 className={styles.price} aria-label=\"Reservation price\">{price} z≈Ç</h3>\r\n      <StarRating score={score} votes={votes} size=\"small\" />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReservationHeader;\r\n","import {VFC} from 'react';\r\nimport {MonthDayProps} from './types';\r\nimport styles from './MonthDay.module.scss';\r\nimport {joinClassNames} from '../../../utils/joinClassNames';\r\n\r\n/**\r\n * Single day of calendar picker.\r\n *\r\n * Explanation of some of the props:\r\n * - available: can be selected\r\n * - selected: is selected, must be available\r\n * - firstSelected: is first of all selected, must be selected\r\n * - lastSelected: is last of all selected, must be selected\r\n * - onlySelected: is only one selected, must be selected\r\n *\r\n */\r\nconst MonthDay: VFC<MonthDayProps> = ({\r\n\tdateString,\r\n\ttimeStamp,\r\n\tmonthDay,\r\n\tcolumn,\r\n\tavailable,\r\n\tonClick,\r\n\tfirstSelected,\r\n\tlastSelected,\r\n\tselected,\r\n\tonlySelected,\r\n\ttoday,\r\n}) => {\r\n\t// Prevent user from misusing component\r\n\tif ((firstSelected || lastSelected || onlySelected) && !selected)\r\n\t\tthrow new Error(\r\n\t\t\t'MonthDay cannot be firstSelected or lastSelected without being selected',\r\n\t\t);\r\n\r\n\t// Prevent user from misusing component\r\n\tif (!available && selected)\r\n\t\tthrow new Error('MonthDay cannot be selected without being available');\r\n\r\n\t/* All css classes */\r\n\tconst availableClass = available ? styles.available : '';\r\n\tconst todayClass = today ? styles.today : '';\r\n\tconst selectedClass = selected ? styles.selected : '';\r\n\tconst firstClass = firstSelected ? styles.first : '';\r\n\tconst lastClass = lastSelected ? styles.last : '';\r\n\tconst onlyClass = onlySelected ? styles.only : '';\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\t/* Prevent focus on click */\r\n\t\t\tonMouseDown={(e) => e.preventDefault()}\r\n\t\t\tdata-testid=\"month_day\"\r\n\t\t\tonClick={available ? () => onClick(timeStamp) : undefined}\r\n\t\t\trole=\"gridcell\"\r\n\t\t\tdata-column={column}\r\n\t\t\taria-label={`You choose ${dateString}`}\r\n\t\t\ttabIndex={0}\r\n\t\t\taria-disabled={available ? 'false' : 'true'}\r\n\t\t\tdata-date={dateString}\r\n\t\t\tclassName={joinClassNames(\r\n\t\t\t\tstyles.container,\r\n\t\t\t\tavailableClass,\r\n\t\t\t\ttodayClass,\r\n\t\t\t\tselectedClass,\r\n\t\t\t\tfirstClass,\r\n\t\t\t\tlastClass,\r\n\t\t\t\tonlyClass,\r\n\t\t\t)}\r\n\t\t>\r\n\t\t\t<div className={styles.wrapper}>\r\n\t\t\t\t<div className={styles.day}>{monthDay}</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default MonthDay;\r\n","import {VFC} from 'react';\r\nimport format from 'date-fns/format';\r\nimport addMonths from 'date-fns/addMonths';\r\nimport {DatePickerModalProps} from './types';\r\nimport styles from './DatePickerModal.module.scss';\r\nimport {joinClassNames} from '../../../utils/joinClassNames';\r\nimport MonthDay from '../../atoms/month_day/MonthDay';\r\nimport {IMonthDay} from '../../../hooks/useDatePicker';\r\n\r\n/** Week days abbreviations */\r\nexport const DAYS_OF_WEEK = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\r\n\r\n/**\r\n * Displays calendar popup.\r\n */\r\nconst DatePickerModal: VFC<DatePickerModalProps> = ({\r\n\topen,\r\n\tid,\r\n\tmonthDays,\r\n\tpickerDate,\r\n\tsetPickerDate,\r\n\tonDateClick,\r\n\tstartDate,\r\n\tendDate,\r\n}) => {\r\n\t// Calculates number of weeks in month view. This will serve as rows in our calendar.\r\n\tconst calendarRows = Array.from({length: monthDays.length / 7}, (_, i) => i);\r\n\r\n\t// Transform Date|number|null to number|null\r\n\tconst startTimestamp = !startDate\r\n\t\t? null\r\n\t\t: 'number' === typeof startDate\r\n\t\t? startDate\r\n\t\t: startDate.getTime();\r\n\tconst endTimestamp = !endDate\r\n\t\t? null\r\n\t\t: 'number' === typeof endDate\r\n\t\t? endDate\r\n\t\t: endDate.getTime();\r\n\r\n\t// Check if particular day is selected\r\n\tconst isDaySelected = (day: IMonthDay) =>\r\n\t\t!endTimestamp\r\n\t\t\t? day.timeStamp === startTimestamp\r\n\t\t\t: day.timeStamp >= (startTimestamp || 0) && day.timeStamp <= endTimestamp;\r\n\r\n\t// Check if particular day is selected and only one selected\r\n\tconst isOnlySelected = (day: IMonthDay) =>\r\n\t\tisDaySelected(day) &&\r\n\t\t(!endTimestamp ||\r\n\t\t\t(day.timeStamp === endTimestamp && day.timeStamp === startTimestamp));\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tclassName={styles.modal}\r\n\t\t\thidden={!open}\r\n\t\t\taria-modal={open ? 'true' : 'false'}\r\n\t\t\trole=\"dialog\"\r\n\t\t\taria-label=\"Choose reservation dates\"\r\n\t\t\tid={id}\r\n\t\t>\r\n\t\t\t<div>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={styles.modal_header}\r\n\t\t\t\t>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttitle=\"Previous month\"\r\n\t\t\t\t\t\tdata-column={0}\r\n\t\t\t\t\t\tclassName={styles.month_arrow_btn}\r\n\t\t\t\t\t\tonClick={() => setPickerDate(addMonths(pickerDate, -1))}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\tclassName={joinClassNames(\r\n\t\t\t\t\t\t\t\tstyles.month_arrow,\r\n\t\t\t\t\t\t\t\tstyles.month_arrow_left,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<div className={styles.month}>\r\n\t\t\t\t\t\t{format(pickerDate, 'LLLL')} {pickerDate.getFullYear()}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttitle=\"Next month\"\r\n\t\t\t\t\t\tdata-column={6}\r\n\t\t\t\t\t\tclassName={styles.month_arrow_btn}\r\n\t\t\t\t\t\tonClick={() => setPickerDate(addMonths(pickerDate, 1))}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\taria-hidden=\"true\"\r\n\t\t\t\t\t\t\tclassName={joinClassNames(\r\n\t\t\t\t\t\t\t\tstyles.month_arrow,\r\n\t\t\t\t\t\t\t\tstyles.month_arrow_right,\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t></span>\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div role=\"grid\" className={styles.calendar_container}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<div role=\"row\" className={styles.week_names}>\r\n\t\t\t\t\t\t\t{DAYS_OF_WEEK.map((day) => (\r\n\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\tkey={day}\r\n\t\t\t\t\t\t\t\t\trole=\"columnheader\"\r\n\t\t\t\t\t\t\t\t\tclassName={styles.week_day}\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{day}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t{calendarRows.map((index) => (\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\trole=\"row\"\r\n\t\t\t\t\t\t\t\tkey={'row_' + index}\r\n\t\t\t\t\t\t\t\tclassName={styles.calendar_row}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{monthDays\r\n\t\t\t\t\t\t\t\t\t.filter((_, i) => i < (index + 1) * 7 && i >= index * 7)\r\n\t\t\t\t\t\t\t\t\t.map((day, i) => (\r\n\t\t\t\t\t\t\t\t\t\t<MonthDay\r\n\t\t\t\t\t\t\t\t\t\t\tonlySelected={isOnlySelected(day)}\r\n\t\t\t\t\t\t\t\t\t\t\tavailable={day.available}\r\n\t\t\t\t\t\t\t\t\t\t\tcolumn={i}\r\n\t\t\t\t\t\t\t\t\t\t\tdateString={day.dateString}\r\n\t\t\t\t\t\t\t\t\t\t\tfirstSelected={day.timeStamp === startTimestamp}\r\n\t\t\t\t\t\t\t\t\t\t\tlastSelected={day.timeStamp === endTimestamp}\r\n\t\t\t\t\t\t\t\t\t\t\tselected={isDaySelected(day)}\r\n\t\t\t\t\t\t\t\t\t\t\tmonthDay={day.monthDay}\r\n\t\t\t\t\t\t\t\t\t\t\ttimeStamp={day.timeStamp}\r\n\t\t\t\t\t\t\t\t\t\t\ttoday={day.today}\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={() => onDateClick(day)}\r\n\t\t\t\t\t\t\t\t\t\t\tkey={day.dateString}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t))}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DatePickerModal;\r\n","import isToday from 'date-fns/isToday';\r\nimport getDay from 'date-fns/getDay';\r\nimport isBefore from 'date-fns/isBefore';\r\nimport differenceInCalendarDays from 'date-fns/differenceInCalendarDays';\r\nimport addDays from 'date-fns/addDays';\r\nimport isSameDay from 'date-fns/isSameDay';\r\nimport format from 'date-fns/format';\r\nimport {CalendarDate, IMonthDay} from '../hooks/useDatePicker';\r\n\r\n/**\r\n * Function takes two dates as Date objects or timestamps and returns array of formatted MonthDay objects.\r\n */\r\nexport function computeCalendarDays(\r\n\tstartDate: CalendarDate,\r\n\tendDate: CalendarDate,\r\n\tunavailableDates: CalendarDate[],\r\n\tcalendarDate: CalendarDate = new Date(),\r\n\tselectedDate?: CalendarDate,\r\n): IMonthDay[] {\r\n\t// Add some validity checking\r\n\tif (isBefore(endDate, startDate))\r\n\t\tthrow new TypeError('End date must not be before start date');\r\n\r\n\t// calculate number of days between two dates\r\n\tconst daysDiff = differenceInCalendarDays(endDate, startDate);\r\n\tconst today = new Date();\r\n\r\n\t// sort it ascending, in case not sorted\r\n\tunavailableDates = unavailableDates.sort((a: any, b: any) => a - b);\r\n\r\n\t// find first unavailable\r\n\tconst unavailableFrom = selectedDate ? unavailableDates.find(d => d > selectedDate) : undefined;\r\n\r\n\t// initialize structure to be returned\r\n\tconst days: IMonthDay[] = [];\r\n\r\n\tfor (let i = 0; i <= daysDiff; i++) {\r\n\t\t// this is\r\n\t\tconst currentDay = addDays(startDate, i);\r\n\t\t// exclude past dates from available dates\r\n\t\tconst notPast = differenceInCalendarDays(currentDay, today) >= 0;\r\n\t\tlet available =\r\n\t\t\tnotPast && !unavailableDates.some((d) => isSameDay(d, currentDay));\r\n\r\n\t\t// extra check, if available before first unavailable\r\n\t\tif (unavailableFrom && available)\r\n\t\t\tavailable = differenceInCalendarDays(currentDay, unavailableFrom) < 0;\r\n\r\n\t\t// extra check, if available date do not before selectedDate\r\n\t\tif (selectedDate && available)\r\n\t\t\tavailable = differenceInCalendarDays(currentDay, selectedDate) >= 0;\r\n\t\t\r\n\t\t// set all monthDay properties\r\n\t\tdays.push({\r\n\t\t\tavailable: available,\r\n\t\t\tweekDay: getDay(currentDay),\r\n\t\t\ttoday: isToday(currentDay),\r\n\t\t\ttimeStamp: currentDay.getTime(),\r\n\t\t\tmonthDay: currentDay.getDate(),\r\n\t\t\tdateString: format(currentDay, 'dd/MM/yyyy'),\r\n\t\t});\r\n\t}\r\n\r\n\treturn days;\r\n}\r\n","import startOfWeek from 'date-fns/startOfWeek';\r\nimport getDaysInMonth from 'date-fns/getDaysInMonth';\r\nimport endOfMonth from 'date-fns/endOfMonth';\r\nimport isSameDay from 'date-fns/isSameDay';\r\nimport startOfMonth from 'date-fns/startOfMonth';\r\nimport differenceInDays from 'date-fns/differenceInDays';\r\nimport addDays from 'date-fns/addDays';\r\nimport {CalendarDate} from \"../hooks/useDatePicker\";\r\n\r\n\r\n/**\r\n * returns first Sunday and last Saturday to display in month view (which usually contains 35 days, but sometimes 28 or 42)\r\n */\r\nexport function getCalendarMonthBoundries (date: CalendarDate): [CalendarDate, CalendarDate] {\r\n  // First day of month\r\n  const firstDay = startOfMonth(date);\r\n\r\n  // Last day of month\r\n  const lastDay = endOfMonth(date);\r\n\r\n  // Sunday of first week of the month, our start day\r\n  const firstDayOfWeek = startOfWeek(firstDay);\r\n\r\n  // Difference in days between start day of the month and start day of view\r\n  const daysToFirst = differenceInDays(firstDay, firstDayOfWeek);\r\n\r\n  // How many days given month has\r\n  const monthLength = getDaysInMonth(date);\r\n\r\n  // Some months need only 28 days to display in view \r\n  const shortView = monthLength === 28 && isSameDay(firstDay, firstDayOfWeek);\r\n\r\n  // Some months need 42 days to display in view \r\n  const longView = monthLength + daysToFirst > 35;\r\n\r\n  const viewDays = longView ? 42 : 35;\r\n\r\n  // How many days need to be added to last day of the month for the view to have last day on Saturday\r\n  const daysToAdd = viewDays - (daysToFirst + monthLength);\r\n\r\n\r\n  // Non-leap year February starting on Sunday\r\n  if (shortView) return [firstDay, lastDay];\r\n\r\n\r\n  // Return Sunday as first day, and Saturday as last\r\n  return [firstDayOfWeek, addDays(lastDay, daysToAdd)];\r\n}","declare global {\r\n  interface Element {\r\n    msMatchesSelector(selectors: string): boolean;\r\n  }\r\n}\r\n\r\n/**\r\n * Function returns true if selector matches element, or any ancestor in the element's ancestors chain.\r\n * Otherwise returns false.\r\n */\r\nexport function crossBrowserElClosest(el: Element, selector: string): boolean {\r\n  // incorrect typescript interface, cast element to any to avoid error\r\n  if (!(Element as any).prototype.matches) {\r\n    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;\r\n  }\r\n  \r\n  // incorrect typescript interface, cast element to any to avoid error\r\n  if ((Element as any).prototype.closest) return Boolean(el.closest(selector));\r\n\r\n  do {\r\n    if (el.matches(selector)) return true;\r\n    (el as unknown) = el.parentElement || el.parentNode;\r\n  } while (el !== null && el.nodeType === 1);\r\n\r\n  return false;\r\n}\r\n","/**\r\n * Finds every focusable elements within given container\r\n */\r\nexport function findFocusableElements (el: Element): HTMLElement[] {\r\n  return Array.from(el.querySelectorAll<HTMLElement>('a[href], button, input, textarea, select, details,[tabindex]:not([tabindex=\"-1\"])'))\r\n    .filter(el => !el.hasAttribute('disabled') && !(el.getAttribute(\"aria-hidden\") === \"true\"));\r\n}","import {useEffect, useMemo, useState} from 'react';\r\nimport startOfDay from 'date-fns/startOfDay';\r\nimport {computeCalendarDays} from '../utils/computeCalendarDays';\r\nimport {getCalendarMonthBoundries} from '../utils/getCalendarMonthBoundries';\r\nimport {usePickerKeyboardControl} from './usePickerKeyboardControl';\r\nimport {usePrevious} from './usePrevious';\r\n\r\nexport type CalendarDate = Date | number;\r\nexport type IMonthDay = {\r\n\ttimeStamp: number;\r\n\tavailable: boolean;\r\n\ttoday: boolean;\r\n\tweekDay: 0 | 1 | 2 | 3 | 4 | 5 | 6;\r\n\tmonthDay: number;\r\n\tdateString: string;\r\n};\r\n\r\ntype SetDate = (d: CalendarDate | null) => void;\r\n\r\n/**\r\n * Handles all the logic associated with date picker.\r\n */\r\nexport function useDatePicker(\r\n\tsetStartDate: SetDate,\r\n\tsetEndDate: SetDate,\r\n\tstartDate: CalendarDate | null,\r\n\tendDate: CalendarDate | null,\r\n\tunavailableDates: CalendarDate[],\r\n\tid?: string,\r\n) {\r\n\t/* Handles picker state */\r\n\tconst [pickerOpen, setPickerOpen] = useState<boolean>(false);\r\n\t/* Date for calendar manipulation */\r\n\tconst [pickerDate, setPickerDate] = useState<Date>(startOfDay(new Date()));\r\n\r\n\t/* Stores all relevant days informations */\r\n\tconst [monthDays, setMonthDays] = useState<IMonthDay[]>([]);\r\n\r\n\r\n\t/* Remember previous startDate to optimize state recalculation in useEffect */\r\n\tconst prevStartDate = usePrevious(startDate);\r\n\r\n\tconst pickerId = id || 'reservation_date_picker';\r\n\r\n\t// use memoization for modalId, to prevent useEffect extensive calls;\r\n\tconst modalId = useMemo(\r\n\t\t() => (id ? id + '_modal' : 'reservation_date_picker_modal'),\r\n\t\t[id],\r\n\t);\r\n\r\n\t// Handles focus, and keyboard control\r\n\tusePickerKeyboardControl(pickerOpen, setPickerOpen, pickerId, modalId);\r\n\r\n\t// Clear dates each time picker is open. Otherwise start date can never be changed\r\n\tuseEffect(() => {\r\n\t\tif (pickerOpen) {\r\n\t\t\tsetStartDate(null);\r\n\t\t\tsetEndDate(null);\r\n\t\t\tsetPickerDate(startOfDay(new Date()));\r\n\t\t}\r\n\t}, [pickerOpen, setStartDate, setEndDate]);\r\n\r\n\t\r\n\t// When picker date changes, days must be recalculated\r\n\tuseEffect(() => {\r\n\t\tif (!pickerDate) return;\r\n\t\t// calculate first and last day to display\r\n\t\tconst [start, end] = getCalendarMonthBoundries(pickerDate);\r\n\r\n\t\t// calculate and set MonthDay object's array\r\n\t\tsetMonthDays(\r\n\t\t\tcomputeCalendarDays(\r\n\t\t\t\tstart,\r\n\t\t\t\tend,\r\n\t\t\t\tunavailableDates,\r\n\t\t\t\tpickerDate,\r\n\t\t\t\tstartDate ? startDate : undefined,\r\n\t\t\t),\r\n\t\t);\r\n\t}, [pickerDate, unavailableDates, startDate]);\r\n\r\n\t// Recalculate month days when each time start date changed.\r\n\t// User shouldn't be able to pick dates either before startDate, or after first unavailable after startDate\r\n\tuseEffect(() => {\r\n\t\tif (!startDate) return;\r\n\t\tif (startDate === prevStartDate) return;\r\n\t\t\r\n\t\t// calculate first and last day to display\r\n\t\tconst [start, end] = getCalendarMonthBoundries(pickerDate);\r\n\r\n\t\tconst calDays = computeCalendarDays(\r\n\t\t\tstart,\r\n\t\t\tend,\r\n\t\t\tunavailableDates,\r\n\t\t\tpickerDate,\r\n\t\t\tstartDate,\r\n\t\t);\r\n\r\n\t\t// calculate and set MonthDay object's array\r\n\t\tsetMonthDays(calDays);\r\n\t}, [pickerDate, unavailableDates, startDate, prevStartDate]);\r\n\r\n\t// When date setting is not complete, clear on close picker\r\n\tuseEffect(() => {\r\n\t\tif (pickerOpen) return;\r\n\t\tif (startDate && endDate) return;\r\n\t\tsetStartDate(null);\r\n\t\tsetEndDate(null);\r\n\t}, [pickerOpen, startDate, endDate, setEndDate, setStartDate]);\r\n\r\n\r\n\treturn {\r\n\t\tpickerOpen,\r\n\t\tsetPickerOpen,\r\n\t\tpickerDate,\r\n\t\tsetPickerDate,\r\n\t\tmonthDays,\r\n\t\tpickerId,\r\n\t\tmodalId,\r\n\t};\r\n}\r\n","import {useEffect, useRef} from 'react';\r\n\r\n/**\r\n * Hook stores previous value of any argument passed to it\r\n */\r\nexport const usePrevious = <T = any> (value: T) => {\r\n  const ref = useRef<T | undefined>();\r\n\r\n  useEffect(() => {\r\n    ref.current = value;\r\n  }, [value]);\r\n  return ref.current;\r\n};","import {Dispatch, SetStateAction, useEffect, useState} from 'react';\r\nimport {crossBrowserElClosest} from '../utils/crossBrowserElClosest';\r\nimport {findFocusableElements} from '../utils/findFocusableElements';\r\n\r\n/**\r\n * Handles focus and simplified keyboard control of modal picker.\r\n * For up and down arrow navigations to work, elements must be groupped in columns via data-column attributes\r\n * @param pickerId - controlling component id\r\n * @param modalId - popup component id\r\n */\r\nexport function usePickerKeyboardControl(\r\n\tpickerOpen: boolean,\r\n\tsetPickerOpen: Dispatch<SetStateAction<boolean>>,\r\n\tpickerId: string,\r\n\tmodalId: string,\r\n) {\r\n\t/* Helps handle restoring focus after closing date picker */\r\n\tconst [lastActiveElement, setLastActiveElement] = useState<Element | null>(\r\n\t\tnull,\r\n\t);\r\n\r\n\t// handle keyboard and mouse during select open\r\n\tuseEffect(() => {\r\n\t\t// closes popup when clicked anywhere outside\r\n\t\tconst mouseHandler = (e: MouseEvent) => {\r\n\t\t\tif (!crossBrowserElClosest(e.target as Element, '#' + modalId)) {\r\n\t\t\t\tsetPickerOpen(false);\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Handles keyboard interactions\r\n\t\tconst keyboardHandler = (e: KeyboardEvent) => {\r\n\t\t\t// prevent default, all keyboard interactions hanlded programatically\r\n\t\t\te.preventDefault();\r\n\t\t\t// handle escape key\r\n\t\t\tif (e.key === 'Escape' || e.key === 'Esc') {\r\n\t\t\t\tsetPickerOpen(false);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// find actual modal component\r\n\t\t\tconst picker = document.getElementById(modalId);\r\n\t\t\tif (!picker)\r\n\t\t\t\tthrow new Error(\r\n\t\t\t\t\t'Picker modal not found in document. Given id : ' + modalId,\r\n\t\t\t\t);\r\n\r\n\t\t\t// Find all focusable elements\r\n\t\t\tconst elements: HTMLElement[] = findFocusableElements(picker);\r\n\t\t\t// Check if picker supports vertical navigation\r\n\t\t\tconst hasColumns = Boolean(picker.querySelector('[data-column]'));\r\n\r\n\t\t\tconst focusIndex = elements.findIndex(\r\n\t\t\t\t(el) => el === document.activeElement,\r\n\t\t\t);\r\n\r\n\t\t\t// return if no elements to switch focus\r\n\t\t\tif (!elements.length) return;\r\n\r\n\t\t\t// Tab without shift pressed or down arrow\r\n\t\t\tif ((e.key === 'Tab' && !e.shiftKey) || e.key === 'ArrowRight' || e.key === 'Right') {\r\n\t\t\t\tif (focusIndex === -1) elements[0].focus();\r\n\t\t\t\telse elements[(focusIndex + 1) % elements.length].focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Tab without shift pressed or down arrow\r\n\t\t\tif ((e.key === 'Tab' && e.shiftKey) || e.key === 'ArrowLeft' || e.key === 'Left') {\r\n\t\t\t\tif (focusIndex === -1) elements[elements.length - 1].focus();\r\n\t\t\t\telse\r\n\t\t\t\t\telements[\r\n\t\t\t\t\t\t((focusIndex === 0 ? elements.length : focusIndex) - 1) %\r\n\t\t\t\t\t\t\telements.length\r\n\t\t\t\t\t].focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// if focus is on list element, click it on enter.\r\n\t\t\tif (e.key === 'Enter' && focusIndex > -1) {\r\n\t\t\t\telements[focusIndex].click();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// Handle up and down arrows here.\r\n\t\t\t// Will only work if elements are groupped in columns via data-column attribute\r\n\t\t\tif (!hasColumns) return;\r\n\r\n\t\t\tif (\r\n\t\t\t\te.key === 'ArrowUp' ||\r\n\t\t\t\te.key === 'ArrowDown' ||\r\n\t\t\t\te.key === 'Down' ||\r\n\t\t\t\te.key === 'Up'\r\n\t\t\t) {\r\n\t\t\t\t// remember key\r\n\t\t\t\tconst keyDown = e.key === 'ArrowDown' || e.key === 'Down';\r\n\t\t\t\t// get current column\r\n\t\t\t\tconst colNum = (document.activeElement as HTMLElement).dataset.column;\r\n\t\t\t\t// when not in column yet, focus first or last element, depending on key pressed\r\n\t\t\t\tif (!colNum) {\r\n\t\t\t\t\telements[keyDown ? 0 : elements.length - 1].focus();\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// current column elements\r\n\t\t\t\tconst colElements: HTMLElement[] = Array.from(\r\n\t\t\t\t\tdocument.querySelectorAll(`[data-column=\"${colNum}\"`),\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// return if column elements not found\r\n\t\t\t\tif (!colElements.length) return;\r\n\r\n\t\t\t\t// find index of active element inside a column\r\n\t\t\t\tconst colIndex = colElements.findIndex(\r\n\t\t\t\t\t(el) => el === document.activeElement,\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// should not happen\r\n\t\t\t\tif (colIndex < 0) return;\r\n\r\n\t\t\t\t// one up or down in the column\r\n\t\t\t\tif (keyDown) colElements[(colIndex + 1) % colElements.length].focus();\r\n\t\t\t\telse\r\n\t\t\t\t\tcolElements[\r\n\t\t\t\t\t\t((colIndex === 0 ? colElements.length : colIndex) - 1) %\r\n\t\t\t\t\t\t\tcolElements.length\r\n\t\t\t\t\t].focus();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// attach listeners when popup open\r\n\t\tif (pickerOpen) {\r\n\t\t\tdocument.addEventListener('click', mouseHandler);\r\n\t\t\tdocument.addEventListener('keydown', keyboardHandler);\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tdocument.removeEventListener('click', mouseHandler);\r\n\t\t\tdocument.removeEventListener('keydown', keyboardHandler);\r\n\t\t};\r\n\t}, [pickerOpen, setPickerOpen, modalId]);\r\n\r\n\t// handle focus on open and close\r\n\tuseEffect(() => {\r\n\t\t// open first focusable element and store currently focused\r\n\t\tconst picker = document.getElementById(modalId);\r\n\t\tif (pickerOpen && picker && !lastActiveElement) {\r\n\t\t\t// save last focused element\r\n\t\t\tsetLastActiveElement(document.activeElement);\r\n\r\n\t\t\t// focus first element in the picker if picker was open via keyboard\r\n\t\t\tconst firstFocusableEl = findFocusableElements(picker)[0];\r\n\t\t\tif (\r\n\t\t\t\tfirstFocusableEl &&\r\n\t\t\t\tdocument.activeElement &&\r\n\t\t\t\tcrossBrowserElClosest(document.activeElement, '#' + pickerId)\r\n\t\t\t)\r\n\t\t\t\tfirstFocusableEl.focus();\r\n\r\n\t\t\t// restore privious focus on picker close\r\n\t\t} else if (!pickerOpen && lastActiveElement) {\r\n\t\t\t(lastActiveElement as HTMLElement).focus();\r\n\t\t\tsetLastActiveElement(null);\r\n\t\t}\r\n\t}, [pickerOpen, lastActiveElement, setLastActiveElement, modalId, pickerId]);\r\n}\r\n","import {useCallback, VFC} from 'react';\r\nimport isSameDay from 'date-fns/isSameDay';\r\nimport format from 'date-fns/format';\r\nimport DatePickerModal from '../../molecules/date_picker_modal/DatePickerModal';\r\nimport styles from './DatePicker.module.scss';\r\nimport {DatePickerProps} from './types';\r\nimport {joinClassNames} from '../../../utils/joinClassNames';\r\nimport {useDatePicker, IMonthDay} from '../../../hooks/useDatePicker';\r\n\r\n/**\r\n * Displays datepicker button. Renders calendar popup component. Handles all picker logic\r\n */\r\nconst DatePicker: VFC<DatePickerProps> = ({\r\n\tstartDate,\r\n\tendDate,\r\n\tid,\r\n\tunavailableDates,\r\n\tsetStartDate,\r\n\tsetEndDate,\r\n}) => {\r\n\t/* Dates formated to string */\r\n\tconst startDateString = startDate\r\n\t\t? format(startDate, 'dd/MM/yyyy')\r\n\t\t: 'Check In';\r\n\tconst endDateString = endDate ? format(endDate, 'dd/MM/yyyy') : 'Check Out';\r\n\r\n\t// Handles all the picker logic\r\n\tconst {\r\n\t\tmonthDays,\r\n\t\tpickerDate,\r\n\t\tpickerOpen,\r\n\t\tsetPickerDate,\r\n\t\tsetPickerOpen,\r\n\t\tpickerId,\r\n\t\tmodalId,\r\n\t} = useDatePicker(\r\n\t\tsetStartDate,\r\n\t\tsetEndDate,\r\n\t\tstartDate,\r\n\t\tendDate,\r\n\t\tunavailableDates,\r\n\t\tid,\r\n\t);\r\n\r\n\t/* Concatenated classes of dates buttons */\r\n\tconst startDateClasses =\r\n\t\tpickerOpen && !startDate\r\n\t\t\t? joinClassNames(styles.date, styles.date_selected)\r\n\t\t\t: styles.date;\r\n\r\n\tconst endDateClasses =\r\n\t\tpickerOpen && startDate && !endDate\r\n\t\t\t? joinClassNames(styles.date, styles.date_selected)\r\n\t\t\t: styles.date;\r\n\r\n\t/* Memoized date handler */\r\n\tconst onDateClick = useCallback(\r\n\t\t(day: IMonthDay): void => {\r\n\t\t\t// Ignore unavailable dates clicks\r\n\t\t\tif (!day.available) return;\r\n\r\n\t\t\t// Neither start or end dates set\r\n\t\t\tif (!startDate) return setStartDate(day.timeStamp);\r\n\r\n\t\t\t// Set or cancel startDate when endDate not yet set\r\n\t\t\tif (startDate && !endDate) {\r\n\t\t\t\treturn setEndDate(day.timeStamp);\r\n\t\t\t}\r\n\r\n\t\t\t// Reset or cancel ebdDate when endDate already set\r\n\t\t\tif (endDate) {\r\n\t\t\t\tconst sameDay = isSameDay(endDate, day.timeStamp);\r\n\t\t\t\treturn setEndDate(sameDay ? null : day.timeStamp);\r\n\t\t\t}\r\n\t\t},\r\n\t\t[startDate, endDate, setStartDate, setEndDate],\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div data-testid=\"date_picker\" id={pickerId} className={styles.wrapper}>\r\n\t\t\t<button\r\n\t\t\t\ttype=\"button\"\r\n\t\t\t\tonMouseDown={(e) => e.preventDefault()}\r\n\t\t\t\tonClick={() => setPickerOpen((prev) => !prev)}\r\n\t\t\t\tclassName={joinClassNames(\r\n\t\t\t\t\tstyles.picker,\r\n\t\t\t\t\tpickerOpen ? styles.modal_open : '',\r\n\t\t\t\t)}\r\n\t\t\t\taria-controls={pickerId + '_dialog'}\r\n\t\t\t\taria-haspopup=\"true\"\r\n\t\t\t\taria-label=\"Controls reservation datepicker\"\r\n\t\t\t\taria-describedby={pickerId + '_info'}\r\n\t\t\t>\r\n\t\t\t\t<span className={startDateClasses}>{startDateString}</span>\r\n\t\t\t\t<span className={styles.arrow}></span>\r\n\t\t\t\t<span className={endDateClasses}>{endDateString}</span>\r\n\t\t\t</button>\r\n\t\t\t<span className=\"visually-hidden\" id={pickerId + '_info'}>\r\n\t\t\t\tThis button opens popup dialog, where reservation dates can be chosen.\r\n\t\t\t</span>\r\n\r\n\t\t\t<DatePickerModal\r\n\t\t\t\topen={pickerOpen}\r\n\t\t\t\tmonthDays={monthDays}\r\n\t\t\t\tunavailableDates={unavailableDates}\r\n\t\t\t\tid={modalId}\r\n\t\t\t\tonDateClick={onDateClick}\r\n\t\t\t\tsetPickerDate={setPickerDate}\r\n\t\t\t\tpickerDate={pickerDate}\r\n\t\t\t\tstartDate={startDate}\r\n\t\t\t\tendDate={endDate}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default DatePicker;\r\n","import {VFC, FormEvent, useState, useCallback} from 'react';\r\nimport differenceInCalendarDays from 'date-fns/differenceInCalendarDays';\r\nimport {CalendarDate} from '../../../hooks/useDatePicker';\r\nimport {joinClassNames} from '../../../utils/joinClassNames';\r\nimport Button from '../../atoms/button/Button';\r\nimport Divider from '../../atoms/divider/Divider';\r\nimport Input from '../../atoms/input/Input';\r\nimport Label from '../../atoms/label/Label';\r\nimport ReservationHeader from '../../molecules/reservation_header/ReservationHeader';\r\nimport DatePicker from '../date_picker/DatePicker';\r\nimport styles from './ReservationCard.module.scss';\r\nimport {ReservationCardProps} from './types';\r\n\r\n/**\r\n * Reservation Card component. Displays reservation info, and dates picking form. Handles validation of the form.\r\n */\r\nconst ReservationCard: VFC<ReservationCardProps> = ({\r\n\tprice,\r\n\tscore,\r\n\tvotes,\r\n\tonSubmit,\r\n\tstartDate,\r\n\tendDate,\r\n\tunavailableDates,\r\n\tsetEndDate,\r\n\tsetStartDate,\r\n}) => {\r\n\t/* Displays form errors, indicates validity of the form */\r\n\tconst [formError, setFormError] = useState('');\r\n\r\n\tconst validateForm = (): boolean => {\r\n\t\t//  check if dates are set\r\n\t\tif (!startDate || !endDate) {\r\n\t\t\tsetFormError('Both dates must be set');\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n    //  check if any date in the past\r\n\t\tif (\r\n\t\t\tdifferenceInCalendarDays(startDate, new Date()) < 0 ||\r\n\t\t\tdifferenceInCalendarDays(endDate, new Date()) < 0\r\n\t\t) {\r\n\t\t\tsetFormError('Cannot reserve past dates');\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// just in case check if startDate equal or lesser than endDate\r\n\t\tif (startDate > endDate) {\r\n\t\t\tsetFormError('End date may not be before start date.');\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t// just in case check if no unvalid dates chosen\r\n\t\tif (unavailableDates.some((date) => date >= startDate && date <= endDate)) {\r\n\t\t\tsetFormError('Unavailable date(s) are checked');\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t};\r\n\r\n\t/* Call prevent default, as page should not be reloaded */\r\n\tconst handleSubmit = (e: FormEvent<HTMLFormElement>): void => {\r\n\t\te.preventDefault();\r\n\t\tif (validateForm()) onSubmit();\r\n\t};\r\n\r\n\t/* Set startDate, clear formError. UseCallback to prevent rerendering */\r\n\tconst handleStartDate = useCallback(\r\n\t\t(date: CalendarDate | null) => {\r\n\t\t\tsetStartDate(date);\r\n\t\t\tif (date) setFormError('');\r\n\t\t},\r\n\t\t[setStartDate, setFormError],\r\n\t);\r\n\r\n\t/* Set endDate, clear formError. UseCallback to prevent rerendering */\r\n\tconst handleEndDate = useCallback(\r\n\t\t(date: CalendarDate | null) => {\r\n\t\t\tsetEndDate(date);\r\n\t\t\tif (date) setFormError('');\r\n\t\t},\r\n\t\t[setEndDate, setFormError],\r\n\t);\r\n\r\n\treturn (\r\n\t\t<div className={styles.card} data-testid=\"reservation_card\">\r\n\t\t\t<div className={styles.formControl}>\r\n\t\t\t<ReservationHeader price={price} score={score} votes={votes} />\r\n\t\t\t<Divider />\r\n\t\t\t</div>\r\n\t\t\t<form onSubmit={handleSubmit} name=\"reservation_form\">\r\n\t\t\t\t<div className={styles.formControl}>\r\n\t\t\t\t\t<Label idFor=\"dummy1\" title=\"Dates\" size=\"small\" />\r\n\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\tunavailableDates={unavailableDates}\r\n\t\t\t\t\t\tstartDate={startDate}\r\n\t\t\t\t\t\tendDate={endDate}\r\n\t\t\t\t\t\tsetStartDate={handleStartDate}\r\n\t\t\t\t\t\tsetEndDate={handleEndDate}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={styles.formControl}>\r\n\t\t\t\t\t<Label idFor=\"dummy1\" title=\"Dummy 1\" size=\"small\" />\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tid=\"dummy1\"\r\n\t\t\t\t\t\tplaceholder=\"Dummy content\"\r\n            onChange={() => setFormError(\"\")}\r\n            name=\"dummy1\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={styles.formControl}>\r\n\t\t\t\t\t<Label idFor=\"dummy2\" title=\"Dummy 2\" size=\"small\" />\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tid=\"dummy2\"\r\n\t\t\t\t\t\tplaceholder=\"Dummy content 2\"\r\n            onChange={() => setFormError(\"\")}\r\n            name=\"dummy2\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div className={styles.formControl}>\r\n\t\t\t\t\t<p\r\n\t\t\t\t\t\trole=\"alert\"\r\n\t\t\t\t\t\taria-atomic=\"true\"\r\n\t\t\t\t\t\tclassName={joinClassNames(\r\n\t\t\t\t\t\t\tstyles.errMsg,\r\n\t\t\t\t\t\t\tformError ? styles.error : '',\r\n\t\t\t\t\t\t)}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{formError}\r\n\t\t\t\t\t</p>\r\n\t\t\t\t\t<Button type=\"submit\" size=\"medium\" disabled={Boolean(formError)}>\r\n\t\t\t\t\t\tSubmit\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</form>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default ReservationCard;\r\n","import {useMemo, useState, VFC} from \"react\";\r\nimport styles from \"./App.module.scss\";\r\nimport ReservationCard from \"../../organisms/reservation_card/ReservationCard\";\r\nimport {CalendarDate} from \"../../../hooks/useDatePicker\";\r\nimport {addDays} from \"date-fns\";\r\n\r\n\r\n/**\r\n * Main Component, added to project to render ReservationCard\r\n */\r\nconst App: VFC = () => {\r\n  const [startDate, setStartDate] = useState<CalendarDate | null>(null);\r\n  const [endDate, setEndDate] = useState<CalendarDate | null>(null);\r\n  const unavailableDates = useMemo(() => [addDays(new Date(), 5)], []);\r\n  return (\r\n    <div className={styles.app}>\r\n      <ReservationCard\r\n        score={2.5}\r\n        votes={100}\r\n        price={200}\r\n        unavailableDates={unavailableDates}\r\n        startDate={startDate}\r\n        endDate={endDate}\r\n        setEndDate={setEndDate}\r\n        setStartDate={setStartDate}\r\n        onSubmit={() => {}}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import 'react-app-polyfill/ie11';\r\nimport 'react-app-polyfill/stable';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/global.scss';\r\nimport App from './components/pages/app/App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ReservationCard_card__2rAK2\",\"formControl\":\"ReservationCard_formControl__3rS9P\",\"errMsg\":\"ReservationCard_errMsg__1tRyK\",\"error\":\"ReservationCard_error__3mKvp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"StarRating_container__3YJi2\",\"wrapper\":\"StarRating_wrapper__dyBtg\",\"container_small\":\"StarRating_container_small__166AX\",\"container_medium\":\"StarRating_container_medium__3D_BF\",\"container_large\":\"StarRating_container_large__2RQVN\",\"votes\":\"StarRating_votes__mFDl5\",\"votes_small\":\"StarRating_votes_small__2OhR1\",\"votes_medium\":\"StarRating_votes_medium__39Odb\",\"votes_large\":\"StarRating_votes_large__1ydnL\"};"],"sourceRoot":""}